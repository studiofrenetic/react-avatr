!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Avatr=t()}}(function(){return function t(e,r,o){function s(n,p){if(!r[n]){if(!e[n]){var a="function"==typeof require&&require;if(!p&&a)return a(n,!0);if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return s(r?r:t)},u,u.exports,t,e,r,o)}return r[n].exports}for(var i="function"==typeof require&&require,n=0;n<o.length;n++)s(o[n]);return s}({1:[function(t,e,r){"use strict";var o=window.React,s=t("MD5"),i=o.createClass({displayName:"Avatr",propTypes:{priority:o.PropTypes.array,colors:o.PropTypes.array,name:o.PropTypes.string,value:o.PropTypes.string,email:o.PropTypes.string,facebookId:o.PropTypes.string,googleId:o.PropTypes.string,skypeID:o.PropTypes.string,round:o.PropTypes.bool,size:o.PropTypes.number},getDefaultProps:function(){return{colors:["#d73d32","#7e3794","#4285f4","#67ae3f","#d61a7f","#ff4080"],name:null,value:null,email:null,facebookId:null,skypeId:null,googleId:null,round:!1,size:100}},getInitialState:function(){return{src:null,value:null,firstFetch:!1,priority:["src","gravatar","facebook","google","skype","name","value"]}},randomColor:function(){var t=Math.floor(Math.random()*this.props.colors.length);return this.props.colors[t]},setSrc:function(t,e){null!==t&&(null===e&&(e=this),this.setState({src:t}))},getProtocol:function(){return"undefined"==typeof window?"https:":window.location.protocol},getGravatar:function(t,e){if(null==e.props.email)return t();var r=e.props.email;r.indexOf("@")>-1&&(r=s(r));var o="https:"===e.getProtocol()?"https://secure.":"http://",i=o+"gravatar.com/avatar/"+r+"?s="+e.props.size+"&d=404";e.setSrc(i,e)},getFacebook:function(t,e){if(null==e.props.facebookId)return t();var r=e.getProtocol()+"//graph.facebook.com/"+e.props.facebookId+"/picture?width="+e.props.size+"&height="+e.props.size;e.setSrc(r,e)},getGoogle:function(t,e){if(null==e.props.googleId)return t();var r=e.getProtocol()+"//picasaweb.google.com/data/entry/api/user/"+e.props.googleId+"?alt=json";e.get(r,function(t){var r=t.entry.gphoto$thumbnail.$t.replace("s64","s"+e.props.size);e.setSrc(r,e)},t)},getSkype:function(t,e){if(null==e.props.skypeId)return t();var r=e.getProtocol()+"//api.skype.com/users/"+e.props.skypeId+"/profile/avatar";e.setSrc(r,e)},getSrc:function(t,e){return null==e.props.src||0==e.props.src.length?t():void e.setSrc(e.props.src,e)},get:function(t,e,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=JSON.parse(o.responseText);e(t)}else r(o.status)},o.open("GET",t,!0),o.send()},getName:function(t,e){return e.props.name&&e.props.name.length?void e.setState({src:null,value:e.getInitials(e.props.name)}):void t()},getValue:function(t,e){return e.props.value&&e.props.value.length?void e.setState({src:null,value:e.props.value}):void t()},fetch:function(t,e){if(t&&"error"===t.type?(e=this,e.state.src=null):e||(e=this),this.state.priority.length){var r=this.state.priority[0];console.log("next ",r),r&&this.setState({priority:this.state.priority.slice(1)},function(){e.callNext(r,e)})}},callNext:function(t,e){var r=e["get"+e.capitalizeFirstLetter(t)];"function"==typeof r&&r(function(t){e.fetch(t,e)}.bind(e),e)},getInitials:function(t){for(var e=t.split(" "),r="",o=0;o<e.length;o++)r+=e[o].substr(0,1).toUpperCase();return r},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},componentWillReceiveProps:function(t){console.log("componentWillReceiveProps"),t.src&&t.src!==this.props.src&&this.setState({src:t.src}),t.value&&t.value!==this.props.value&&this.setState({value:t.value}),t.priority&&t.priority!==this.props.priority&&this.setState({priority:this.props.priority})},componentDidMount:function(){console.log("componentDidMount",this.props),this.state.firstFetch===!1&&this.setState({firstFetch:!0,priority:this.props.priority},function(){this.fetch()})},getUI:function(){var t={maxWidth:"100%",width:this.props.size,height:this.props.size,borderRadius:this.props.round?500:0},e={background:this.randomColor(),width:this.props.size,height:this.props.size,font:Math.floor(this.props.size/3)+"px/100px Helvetica, Arial, sans-serif",color:"#FFF",textAlign:"center",textTransform:"uppercase",lineHeight:this.props.size+Math.floor(this.props.size/10)+"px",borderRadius:this.props.round?500:0};return this.state.src?o.createElement("img",{width:this.props.size,height:this.props.size,style:t,src:this.state.src,onError:this.fetch}):o.createElement("div",{style:e},this.state.value)},render:function(){var t={display:"inline-block",width:this.props.size,height:this.props.size,borderRadius:this.props.round?500:0},e=this.getUI();return o.createElement("div",{style:t},e)}});e.exports=i},{MD5:void 0}]},{},[1])(1)});